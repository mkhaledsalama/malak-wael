<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HEG | بوابة التعليم الهولوجرامي</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        heg: { 
                            cyan: '#00f2ff', 
                            purple: '#bd00ff', 
                            dark: '#050505',
                            card: 'rgba(15, 15, 22, 0.75)'
                        }
                    },
                    fontFamily: { cairo: ['Cairo', sans-serif] },
                    boxShadow: { 
                        'neon': '0 0 15px rgba(0, 242, 255, 0.15)',
                        'neon-strong': '0 0 25px rgba(0, 242, 255, 0.3)',
                        'glass': '0 8px 32px 0 rgba(0, 0, 0, 0.6)'
                    }
                }
            }
        }
    </script>

    <style>
        body { 
            font-family: 'Cairo', sans-serif; 
            background-color: #020202; 
            color: #f0f0f0; 
            overflow: hidden; 
            height: 100vh; 
        }
        
        /* --- الخلفية --- */
        .clean-bg {
            position: fixed; inset: 0; z-index: -2;
            background: radial-gradient(circle at top center, #11111a 0%, #000000 90%);
        }
        
        .grid-overlay {
            position: fixed; inset: 0; z-index: -1; opacity: 0.15;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px), 
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 40px 40px;
            mask-image: radial-gradient(circle at center, black 0%, transparent 80%);
        }

        /* --- الكروت --- */
        .plan-card {
            background: var(--heg-card, rgba(15, 15, 22, 0.75));
            backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 24px;
            padding: 2rem; width: 100%; max-width: 340px; text-align: center; 
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .plan-card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 242, 255, 0.4);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.7);
        }
        .plan-card.popular {
            background: linear-gradient(180deg, rgba(189, 0, 255, 0.15) 0%, rgba(15, 15, 22, 0.9) 100%);
            border-color: rgba(189, 0, 255, 0.3);
        }

        /* --- الأزرار --- */
        .btn-glass {
            position: relative; overflow: hidden;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white; font-weight: 700; border-radius: 16px;
            transition: all 0.3s ease;
            display: inline-flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-glass:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .btn-primary-glow {
            background: linear-gradient(90deg, #00f2ff, #0099ff);
            color: #000; border: none; font-weight: 800;
        }

        /* --- هيكل الصفحات --- */
        .page-section {
            position: absolute; inset: 0; width: 100%; height: 100%;
            display: none; flex-direction: column; align-items: center;
            padding-top: 100px; 
            padding-bottom: 100px;
            overflow-y: auto; scrollbar-width: none; opacity: 0;
        }
        .page-section::-webkit-scrollbar { display: none; }
        .page-section.active { display: flex; opacity: 1; }
        
        @media (min-height: 850px) {
            .page-section { justify-content: center; padding-top: 0; padding-bottom: 60px; }
        }

        /* --- الناف بار --- */
        .floating-nav {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 1200px; height: 65px; z-index: 100;
            background: rgba(8, 8, 10, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 100px; padding: 0 25px;
            display: flex; align-items: center; justify-content: space-between;
        }
        .nav-link {
            color: #9ca3af; font-weight: 600; font-size: 0.9rem; transition: 0.3s;
            padding: 8px 16px; border-radius: 20px;
        }
        .nav-link:hover { color: white; background: rgba(255,255,255,0.08); }

        /* --- تصميم الفوتر المطور (Compact & Glowing) --- */
        .dev-footer {
            position: fixed; bottom: 20px; left: 50%; 
            transform: translateX(-50%); z-index: 90;
            width: auto; pointer-events: none;
        }

        .dev-badge {
            pointer-events: auto;
            background: rgba(5, 5, 8, 0.85);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 242, 255, 0.15);
            padding: 8px 25px;
            border-radius: 50px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            animation: neon-pulse 3s infinite ease-in-out;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dev-badge:hover {
            transform: scale(1.05);
            background: rgba(5, 5, 8, 0.95);
            border-color: rgba(0, 242, 255, 0.5);
        }

        .dev-name { 
            font-size: 0.75rem; font-weight: 800; color: #fff; letter-spacing: 1px; 
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.2);
        }

        .dev-details {
            display: flex; gap: 8px; align-items: center; justify-content: center;
            margin-top: 2px;
        }

        .dev-role { 
            font-size: 0.55rem; color: #00f2ff; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
        }

        .dev-sep { width: 1px; height: 8px; background: rgba(255,255,255,0.2); }

        .dev-contact { 
            font-size: 0.6rem; color: #aaa; font-family: monospace; letter-spacing: 0.5px;
        }

        @keyframes neon-pulse {
            0% { box-shadow: 0 0 5px rgba(0, 242, 255, 0.1), inset 0 0 5px rgba(0, 242, 255, 0.05); border-color: rgba(0, 242, 255, 0.2); }
            50% { box-shadow: 0 0 15px rgba(0, 242, 255, 0.3), inset 0 0 10px rgba(0, 242, 255, 0.1); border-color: rgba(0, 242, 255, 0.5); }
            100% { box-shadow: 0 0 5px rgba(0, 242, 255, 0.1), inset 0 0 5px rgba(0, 242, 255, 0.05); border-color: rgba(0, 242, 255, 0.2); }
        }

        /* --- الهولوجرام --- */
        .hologram-overlay {
            position: fixed; inset: 0; background: black; z-index: 9999; display: none;
            justify-content: center; align-items: center;
        }
        .holo-container { position: relative; width: 90vw; height: 90vw; max-width: 80vh; max-height: 80vh; display: flex; justify-content: center; align-items: center; }
        .holo-video { width: 100%; height: 100%; object-fit: contain; background: black; }
        
        .frame { position: absolute; width: 35%; height: 20%; overflow: hidden; }
        .pos-top { top: 5%; transform: rotate(180deg); }
        .pos-bottom { bottom: 5%; transform: rotate(0deg); }
        .pos-left { left: -10%; top: 40%; transform: rotate(90deg); }
        .pos-right { right: -10%; top: 40%; transform: rotate(-90deg); }

        .controls-bar { 
            position: absolute; bottom: 40px; display: flex; gap: 12px; z-index: 100; 
            background: rgba(20, 20, 20, 0.9); padding: 12px 25px; border-radius: 50px;
            backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.15);
        }
        .vid-btn { 
            width: 45px; height: 45px; border-radius: 50%; border: none; font-weight: bold;
            background: rgba(255,255,255,0.1); color: white; transition: 0.3s; cursor: pointer;
        }
        .vid-btn.active, .vid-btn:hover { background: #00f2ff; color: black; transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        /* كروت الأسعار Grid */
        .pricing-container {
            display: flex; gap: 20px; justify-content: center; align-items: flex-start;
            flex-wrap: wrap; padding: 20px; width: 100%; max-width: 1200px;
        }
    </style>
</head>
<body>

    <div class="clean-bg"></div>
    <div class="grid-overlay"></div>

    <nav class="floating-nav">
        <div class="flex items-center gap-3 cursor-pointer" onclick="navigate('home')">
            <img src="fo.jpeg" alt="Logo" class="h-10 w-10 rounded-full object-cover border border-heg-cyan/30 shadow-[0_0_10px_rgba(0,242,255,0.2)]">
            <h1 class="text-2xl font-black text-white tracking-widest hidden sm:block">HEG</h1>
        </div>
        
        <div class="hidden md:flex gap-1">
            <button onclick="navigate('home')" class="nav-link">الرئيسية</button>
            <button onclick="navigate('vision')" class="nav-link">الرؤية</button>
            <button onclick="navigate('pricing')" class="nav-link">الباقات</button>
        </div>
        
        <button onclick="openDemo()" class="px-5 py-2 rounded-full font-bold text-sm bg-heg-cyan text-black hover:bg-white transition shadow-neon">
            تجربة <span class="hidden sm:inline">مجانية</span>
        </button>
    </nav>

    <section id="home" class="page-section active">
        <div class="text-center space-y-6 max-w-4xl px-6 relative z-10 flex flex-col items-center mt-24 md:mt-0">
            
            <img src="fo.jpeg" alt="HEG Logo" class="gsap-hero h-24 w-24 md:h-28 md:w-28 rounded-full object-cover mb-2 opacity-90 drop-shadow-[0_0_25px_rgba(189,0,255,0.25)] border-2 border-white/10 animate-pulse">

            <div class="gsap-hero inline-flex items-center px-4 py-1.5 bg-heg-cyan/10 border border-heg-cyan/20 rounded-full backdrop-blur-md text-xs md:text-sm text-heg-cyan font-bold tracking-wider mb-2">
                <span class="w-1.5 h-1.5 rounded-full bg-heg-cyan mr-2 animate-ping"></span>
                مستقبل التعليم التفاعلي
            </div>
            
            <h1 class="gsap-hero text-4xl md:text-7xl lg:text-8xl font-black leading-tight text-white drop-shadow-2xl">
                التعليم أصبح <br> 
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-heg-cyan via-white to-heg-purple filter drop-shadow-lg">واقع ملموس</span>
            </h1>
            
            <p class="gsap-hero text-gray-400 text-lg md:text-xl max-w-xl mx-auto font-light leading-relaxed px-4">
                حول غرفتك إلى معمل ثلاثي الأبعاد متكامل. تقنية الهولوجرام الآن بين يديك بدون إنترنت.
            </p>
            
            <div class="gsap-hero flex flex-col sm:flex-row gap-4 justify-center mt-6 w-full max-w-md mx-auto">
                <button onclick="navigate('pricing')" class="btn-glass btn-primary-glow px-8 py-3.5 text-lg w-full sm:w-auto hover:brightness-110">
                    ابدأ الآن
                </button>
                <button onclick="openDemo()" class="btn-glass px-8 py-3.5 text-lg w-full sm:w-auto">
                    <i data-lucide="play-circle" class="w-5 h-5"></i> شاهد الديمو
                </button>
            </div>
        </div>
    </section>

    <section id="vision" class="page-section">
        <div class="container mx-auto px-4 mt-24 md:mt-0">
            <h2 class="text-4xl md:text-5xl font-bold mb-10 text-white text-center"><span class="text-heg-cyan">مميزات</span> النظام</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto pb-12">
                <div class="plan-card group">
                    <div class="bg-white/5 group-hover:bg-heg-cyan/10 transition-colors w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-glass">
                        <i data-lucide="wifi-off" class="text-heg-cyan" size="32"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white">بدون إنترنت</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">يعمل النظام بالكامل Offline. لا حاجة للاتصال بالشبكة، تعلم في أي وقت وأي مكان.</p>
                </div>
                <div class="plan-card group">
                    <div class="bg-white/5 group-hover:bg-heg-purple/10 transition-colors w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-glass">
                        <i data-lucide="box" class="text-heg-purple" size="32"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white">مجسمات 3D</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">رؤية محيطية شاملة بدقة 360 درجة. تفاصيل دقيقة للأعضاء والخرائط التعليمية.</p>
                </div>
                <div class="plan-card group">
                    <div class="bg-white/5 group-hover:bg-green-500/10 transition-colors w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-glass">
                        <i data-lucide="download-cloud" class="text-green-400" size="32"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-3 text-white">تحميل مباشر</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">امتلاك مدى الحياة. حمل المحتوى مرة واحدة واحتفظ به على جهازك للأبد.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing" class="page-section">
        <div class="container mx-auto px-4 mt-28 md:mt-0 pb-16">
            <div class="text-center mb-10">
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-3">الباقات المتاحة</h2>
                <p class="text-gray-400">أسعار تناسب الطلاب والباحثين</p>
            </div>
            
            <div class="pricing-container mx-auto">
                <div class="plan-card">
                    <div>
                        <h3 class="text-heg-cyan font-bold text-xl mb-1 tracking-wide">Basic</h3>
                        <div class="text-4xl font-black text-white mb-4">300 <span class="text-base text-gray-500 font-normal">ج.م</span></div>
                        <div class="w-full h-px bg-white/10 mb-6"></div>
                        <ul class="text-gray-300 space-y-4 text-sm text-right px-2">
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-heg-cyan w-4"></i> عدد 2 فيديوهات</li>
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-heg-cyan w-4"></i> خاصية التنزيل</li>
                            <li class="flex items-center gap-3 text-gray-600"><i data-lucide="x-circle" class="w-4"></i> جودة 4K</li>
                        </ul>
                    </div>
                    <button onclick="openPayment('Basic', 300)" class="btn-glass mt-8 w-full py-3 text-heg-cyan border-heg-cyan/30 hover:bg-heg-cyan hover:text-black">شراء</button>
                </div>

                <div class="plan-card popular relative z-10 transform md:-translate-y-4">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-heg-purple text-white text-xs font-bold px-4 py-1 rounded-full shadow-lg border border-white/20">الأكثر مبيعاً</div>
                    <div>
                        <h3 class="text-heg-purple font-bold text-2xl mb-1 tracking-wide">Pro</h3>
                        <div class="text-5xl font-black text-white mb-4">450 <span class="text-base text-gray-500 font-normal">ج.م</span></div>
                        <div class="w-full h-px bg-white/10 mb-6"></div>
                        <ul class="text-gray-300 space-y-4 text-sm text-right px-2">
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-heg-purple w-4"></i> عدد 3 فيديوهات</li>
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-heg-purple w-4"></i> جودة عالية 4K</li>
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-heg-purple w-4"></i> أولوية التحميل</li>
                        </ul>
                    </div>
                    <button onclick="openPayment('Pro', 450)" class="btn-glass mt-8 w-full py-4 bg-heg-purple/10 border-heg-purple text-white hover:bg-heg-purple hover:shadow-[0_0_20px_rgba(189,0,255,0.4)]">شراء الآن</button>
                </div>

                <div class="plan-card">
                    <div>
                        <h3 class="text-white font-bold text-xl mb-1 tracking-wide">Elite</h3>
                        <div class="text-4xl font-black text-white mb-4">600 <span class="text-base text-gray-500 font-normal">ج.م</span></div>
                        <div class="w-full h-px bg-white/10 mb-6"></div>
                        <ul class="text-gray-300 space-y-4 text-sm text-right px-2">
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-white w-4"></i> المكتبة الكاملة (4 فيديوهات)</li>
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-white w-4"></i> تحديثات مجانية</li>
                            <li class="flex items-center gap-3"><i data-lucide="check-circle" class="text-white w-4"></i> دعم فني VIP</li>
                        </ul>
                    </div>
                    <button onclick="openPayment('Elite', 600)" class="btn-glass mt-8 w-full py-3 hover:bg-white hover:text-black">شراء</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="dev-footer">
        <div class="dev-badge">
            <div class="dev-name">ENG. MAHMOUD KHALED</div>
            <div class="dev-details">
                <span class="dev-role">Web Developer</span>
                <span class="dev-sep"></span>
                <span class="dev-contact">01129060271</span>
            </div>
        </div>
    </footer>

    <div id="paymentModal" class="fixed inset-0 bg-black/90 hidden items-center justify-center z-[200] backdrop-blur-md p-4">
        <div class="bg-[#0f0f12] p-6 md:p-8 rounded-3xl w-full max-w-md border border-white/10 relative shadow-2xl">
            <button onclick="closeModal('paymentModal')" class="absolute top-4 left-4 text-gray-400 hover:text-white bg-white/5 p-2 rounded-full transition">✕</button>
            <h3 class="text-2xl font-bold mb-6 text-center text-white">إتمام الشراء</h3>
            
            <div class="flex gap-3 mb-6">
                <button onclick="togglePaymentMethod('visa')" id="btn-visa" class="flex-1 py-3 bg-heg-cyan text-black font-bold rounded-xl flex justify-center gap-2 items-center text-sm shadow-lg transition-all"><i data-lucide="credit-card" size="18"></i> بطاقة</button>
                <button onclick="togglePaymentMethod('wallet')" id="btn-wallet" class="flex-1 py-3 bg-[#1a1a1a] text-gray-400 font-bold rounded-xl flex justify-center gap-2 items-center text-sm border border-white/10 hover:bg-[#222] transition-all"><i data-lucide="smartphone" size="18"></i> محفظة</button>
            </div>

            <form id="form-visa" onsubmit="event.preventDefault(); processPayment();" class="space-y-4">
                <input type="text" placeholder="الاسم على البطاقة" required class="w-full bg-[#18181b] border border-white/10 p-3.5 rounded-xl text-white outline-none focus:border-heg-cyan transition text-sm">
                <input type="text" placeholder="رقم البطاقة (16 رقم)" maxlength="16" required class="w-full bg-[#18181b] border border-white/10 p-3.5 rounded-xl text-white outline-none focus:border-heg-cyan transition tracking-widest text-sm">
                <div class="flex gap-3">
                    <input type="text" placeholder="MM/YY" required class="w-full bg-[#18181b] border border-white/10 p-3.5 rounded-xl text-white text-center focus:border-heg-cyan text-sm">
                    <input type="password" placeholder="CVV" required class="w-full bg-[#18181b] border border-white/10 p-3.5 rounded-xl text-white text-center focus:border-heg-cyan text-sm">
                </div>
            </form>

            <form id="form-wallet" class="space-y-4 hidden" onsubmit="event.preventDefault(); processPayment();">
                <div class="p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-xl flex items-center gap-3">
                    <i data-lucide="alert-circle" class="text-yellow-500 shrink-0" size="16"></i>
                    <p class="text-yellow-500 text-xs">يدعم فودافون كاش، انستا باي، ومحافظ البنوك.</p>
                </div>
                <input type="text" placeholder="رقم المحفظة (010...)" maxlength="11" required class="w-full bg-[#18181b] border border-white/10 p-3.5 rounded-xl text-white outline-none focus:border-yellow-500 tracking-widest text-sm">
            </form>

            <button onclick="processPayment()" id="payBtn" class="w-full mt-6 py-3.5 bg-gradient-to-r from-green-600 to-green-500 hover:brightness-110 text-white font-bold rounded-xl transition shadow-lg">
                تأكيد ودفع <span id="payAmount">0</span> ج.م
            </button>
        </div>
    </div>

    <div id="hologramOverlay" class="hologram-overlay">
        <button onclick="closeHologram()" class="absolute top-6 right-6 bg-red-600/90 hover:bg-red-600 text-white px-6 py-2 rounded-full font-bold z-50 backdrop-blur text-sm transition">خروج</button>
        
        <a id="downloadBtn" href="#" class="absolute top-6 left-6 z-50 bg-heg-cyan/10 border border-heg-cyan text-heg-cyan px-6 py-2 rounded-full font-bold text-sm hidden hover:bg-heg-cyan hover:text-black transition flex items-center gap-2" onclick="forceDownload(event)">
            <i data-lucide="download" size="16"></i> حفظ
        </a>
        
        <div class="holo-container">
            <div class="frame pos-top"><video id="v-top" class="holo-video" loop muted playsinline></video></div>
            <div class="frame pos-left"><video id="v-left" class="holo-video" loop muted playsinline></video></div>
            <div class="frame pos-right"><video id="v-right" class="holo-video" loop muted playsinline></video></div>
            <div class="frame pos-bottom"><video id="v-bottom" class="holo-video" loop muted playsinline></video></div>
        </div>

        <div id="playlistContainer" class="controls-bar"></div>
    </div>

    <div id="demoOverlay" class="fixed inset-0 bg-black/95 hidden items-center justify-center z-[300] p-4">
        <button onclick="document.getElementById('demoOverlay').style.display='none'; document.getElementById('demoVid').pause()" class="absolute top-6 right-6 text-white bg-red-600/80 px-4 py-2 rounded-lg hover:bg-red-700 transition font-bold text-sm">إغلاق</button>
        <video id="demoVid" controls class="w-full max-w-4xl max-h-[80vh] border border-heg-cyan/30 shadow-neon rounded-2xl bg-black">
            <source src="fff.mp4" type="video/mp4">
        </video>
    </div>

    <script>
        lucide.createIcons();

        const contentConfig = {
            'Basic': { price: 300, videos: ['ff1.mp4', 'ff2.mp4'] },
            'Pro': { price: 450, videos: ['ff3.mp4', 'jj.mp4', 'ff5.mp4'] },
            'Elite': { price: 600, videos: ['ff6.mp4', 'ff7.mp4', 'ff8.mp4', 'ff9.mp4'] }
        };

        let currentPlan = null;

        function navigate(pageId) {
            document.querySelectorAll('.page-section').forEach(sec => {
                sec.classList.remove('active');
                sec.style.opacity = '0';
            });
            const target = document.getElementById(pageId);
            target.classList.add('active');

            if(pageId === 'home') {
                gsap.fromTo("#home .gsap-hero", {y: 30, opacity: 0}, {y: 0, opacity: 1, duration: 0.8, stagger: 0.1, ease: "power2.out"});
            } else if (pageId === 'pricing') {
                gsap.fromTo(".plan-card", {y: 50, opacity: 0}, {y: 0, opacity: 1, duration: 0.6, stagger: 0.1, ease: "back.out(1.2)"});
            }

            setTimeout(() => target.style.opacity = '1', 50);
        }

        window.onload = () => navigate('home');

        function openPayment(planName, price) {
            currentPlan = planName;
            document.getElementById('payAmount').innerText = price;
            document.getElementById('paymentModal').style.display = 'flex';
            gsap.fromTo("#paymentModal > div", {scale: 0.9, opacity: 0}, {scale: 1, opacity: 1, duration: 0.3, ease: "back.out"});
        }

        function closeModal(id) { document.getElementById(id).style.display = 'none'; }

        function togglePaymentMethod(method) {
            const btnVisa = document.getElementById('btn-visa');
            const btnWallet = document.getElementById('btn-wallet');
            const formVisa = document.getElementById('form-visa');
            const formWallet = document.getElementById('form-wallet');

            if (method === 'visa') {
                btnVisa.className = "flex-1 py-3 bg-heg-cyan text-black font-bold rounded-xl flex justify-center gap-2 items-center text-sm shadow-lg transition-all";
                btnWallet.className = "flex-1 py-3 bg-[#1a1a1a] text-gray-400 font-bold rounded-xl flex justify-center gap-2 items-center text-sm border border-white/10 hover:bg-[#222] transition-all";
                formVisa.classList.remove('hidden');
                formWallet.classList.add('hidden');
            } else {
                btnWallet.className = "flex-1 py-3 bg-heg-cyan text-black font-bold rounded-xl flex justify-center gap-2 items-center text-sm shadow-lg transition-all";
                btnVisa.className = "flex-1 py-3 bg-[#1a1a1a] text-gray-400 font-bold rounded-xl flex justify-center gap-2 items-center text-sm border border-white/10 hover:bg-[#222] transition-all";
                formWallet.classList.remove('hidden');
                formVisa.classList.add('hidden');
            }
        }

        function processPayment() {
            const btn = document.getElementById('payBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = "<span class='animate-pulse'>جاري الاتصال...</span>";
            btn.disabled = true;
            
            setTimeout(() => {
                closeModal('paymentModal');
                btn.innerHTML = originalText;
                btn.disabled = false;
                unlockContent(currentPlan);
            }, 2000);
        }

        function openDemo() {
            document.getElementById('demoOverlay').style.display = 'flex';
            document.getElementById('demoVid').play();
        }

        function unlockContent(plan) {
            const overlay = document.getElementById('hologramOverlay');
            overlay.style.display = 'flex';
            
            const playlist = document.getElementById('playlistContainer');
            playlist.innerHTML = '';
            const videos = contentConfig[plan].videos;
            
            videos.forEach((vid, index) => {
                const btn = document.createElement('button');
                btn.innerText = index + 1;
                btn.className = 'vid-btn';
                btn.onclick = () => playHoloVideo(vid, btn);
                playlist.appendChild(btn);
            });

            if (videos.length > 0) playHoloVideo(videos[0], playlist.children[0]);
        }

        function playHoloVideo(src, btnElement) {
            ['v-top', 'v-bottom', 'v-left', 'v-right'].forEach(id => {
                const vid = document.getElementById(id);
                vid.src = src;
                vid.play();
            });

            const dlBtn = document.getElementById('downloadBtn');
            dlBtn.href = src;
            dlBtn.setAttribute('download', src);
            dlBtn.classList.remove('hidden');
            dlBtn.style.display = "flex";

            document.querySelectorAll('.vid-btn').forEach(b => b.classList.remove('active'));
            if(btnElement) btnElement.classList.add('active');
        }

        function forceDownload(event) {
            event.preventDefault();
            const url = event.currentTarget.href;
            const filename = url.substring(url.lastIndexOf('/') + 1);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function closeHologram() {
            document.getElementById('hologramOverlay').style.display = 'none';
            document.querySelectorAll('.holo-video').forEach(v => v.pause());
        }
    </script>
</body>
</html>